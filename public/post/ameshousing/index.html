<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Gabriel Mednick, PhD">

  
  
  
    
  
  <meta name="description" content="Comparing regression models using the tidymodels framework for machine learning">

  
  <link rel="alternate" hreflang="en-us" href="https://www.gabemednick.com/post/ameshousing/">

  


  
  
  
  <meta name="theme-color" content="hsl(339, 90%, 68%)">
  

  
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" disabled>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark">
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,400i%7CKarla:400,400i,700,700i%7CRoboto+Mono&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z3KLD5FYH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-Z3KLD5FYH0', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu2bd56874e2a90c0733f2eeed0ff2ec73_9038457_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu2bd56874e2a90c0733f2eeed0ff2ec73_9038457_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://www.gabemednick.com/post/ameshousing/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Gabe Mednick">
  <meta property="og:url" content="https://www.gabemednick.com/post/ameshousing/">
  <meta property="og:title" content="Housing Price Predictions | Gabe Mednick">
  <meta property="og:description" content="Comparing regression models using the tidymodels framework for machine learning"><meta property="og:image" content="https://www.gabemednick.com/post/ameshousing/featured.jpg">
  <meta property="twitter:image" content="https://www.gabemednick.com/post/ameshousing/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-05-18T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-05-18T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.gabemednick.com/post/ameshousing/"
  },
  "headline": "Housing Price Predictions",
  
  "image": [
    "https://www.gabemednick.com/post/ameshousing/featured.jpg"
  ],
  
  "datePublished": "2021-05-18T00:00:00Z",
  "dateModified": "2021-05-18T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Gabriel Mednick, PhD"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Gabe Mednick",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.gabemednick.com/images/icon_hu2bd56874e2a90c0733f2eeed0ff2ec73_9038457_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Comparing regression models using the tidymodels framework for machine learning"
}
</script>

  

  


  


  





  <title>Housing Price Predictions | Gabe Mednick</title>

</head>
<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="dark">

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  









<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Gabe Mednick</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Gabe Mednick</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/experience/"><span>Experience</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/resume/gmednickCV.pdf"><span>Resume</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Housing Price Predictions</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    May 18, 2021
  </span>
  

  

  

  
  
  

  
  

</div>

  














</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 415px;">
  <div style="position: relative">
    <img src="/post/ameshousing/featured_hu7fba9da1679ce4a56c592454604cb9c1_375347_720x0_resize_q90_lanczos.jpg" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="https://www.gabemednick.com/post/ameshousing/index_files/header-attrs/header-attrs.js"></script>
<script src="https://www.gabemednick.com/post/ameshousing/index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="https://www.gabemednick.com/post/ameshousing/index_files/plotly-binding/plotly.js"></script>
<script src="https://www.gabemednick.com/post/ameshousing/index_files/typedarray/typedarray.min.js"></script>
<script src="https://www.gabemednick.com/post/ameshousing/index_files/jquery/jquery.min.js"></script>
<link href="https://www.gabemednick.com/post/ameshousing/index_files/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="https://www.gabemednick.com/post/ameshousing/index_files/crosstalk/js/crosstalk.min.js"></script>
<link href="https://www.gabemednick.com/post/ameshousing/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="https://www.gabemednick.com/post/ameshousing/index_files/plotly-main/plotly-latest.min.js"></script>
<link href="https://www.gabemednick.com/post/ameshousing/index_files/leaflet/leaflet.css" rel="stylesheet" />
<script src="https://www.gabemednick.com/post/ameshousing/index_files/leaflet/leaflet.js"></script>
<link href="https://www.gabemednick.com/post/ameshousing/index_files/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="https://www.gabemednick.com/post/ameshousing/index_files/proj4/proj4.min.js"></script>
<script src="https://www.gabemednick.com/post/ameshousing/index_files/Proj4Leaflet/proj4leaflet.js"></script>
<link href="https://www.gabemednick.com/post/ameshousing/index_files/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="https://www.gabemednick.com/post/ameshousing/index_files/leaflet-binding/leaflet.js"></script>


<div id="this-post-is-a-work-in-progress.-i-hope-to-start-out-with-a-bare-bones-modeling-workflow-using-the-tidymodels-ecosystem-for-machine-learning-in-r.-once-we-have-a-basic-workflow-we-can-try-and-improve-model-performance-by-switching-out-the-model-resampling-andor-further-custominzing-the-data-engineering-steps." class="section level4">
<h4>This post is a work in progress. I hope to start out with a bare-bones modeling workflow using the Tidymodels ecosystem for machine learning in R. Once we have a basic workflow, we can try and improve model performance by switching out the model, resampling and/or further custominzing the data engineering steps.</h4>
<p>We are going to use the Ames housing dataset, available in the <code>AmesHousing</code> package, to create a model for price prediction. The dataset contains 81 features on 3000 home sales around the University in Ames, Iowa between 2006-2010. We’re going to try and use these features to train a linear regression model. This version of the data is clean but we will need to do some basic data engineering before we can train our model and test it.</p>
<pre class="r"><code>ames_df &lt;- make_ames() %&gt;% 
  janitor::clean_names() # extracting the data from the AmesHousing package and converting all column names to lower snace_case

# Here are a few functions that I used to get an initial feel for the dataset
#ames_df %&gt;% count(neighborhood)
#summary(ames_df)
#View(ames_df)
#dim(ames_df)</code></pre>
<p>Since sale price is our feature of interest, let’s consider the <em>home sale price distribution</em>. Even before we visualize sale price, we can imagine that the distribution might be skewed in the direction of higher price, owing to a few uber-expensive mansions. If that’s the case, we will want to apply a log transformation to the sale price before modeling.</p>
<div class="figure"><span id="fig:figs"></span>
<img src="https://www.gabemednick.com/post/ameshousing/index_files/figure-html/figs-1.png" alt="\label{fig:figs} A.) Distribution of house count vs. sale price. B.) With log transformation with of sale price. The dotted red line is the median price." width="672" />
<p class="caption">
Figure 1:  A.) Distribution of house count vs. sale price. B.) With log transformation with of sale price. The dotted red line is the median price.
</p>
</div>
<p>Let’s also visualize how the house sales are distributed across neighborhoods.</p>
<pre class="r"><code>ames_df %&gt;% 
  count(neighborhood) %&gt;% 
  mutate(neighborhood = str_replace_all(neighborhood, &quot;_&quot;, &quot; &quot;),
         neighborhood = fct_reorder(neighborhood, n)) %&gt;% 
  ggplot(aes(n, neighborhood, fill = neighborhood)) +
  geom_col() +
  labs(x = &#39;# of houses sold by neighborhood&#39;, 
       y = &quot;&quot;) +
  theme(legend.position = &#39;none&#39;)</code></pre>
<p><img src="https://www.gabemednick.com/post/ameshousing/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>How has the sale price changed with time? The boxplots below show the sale price for each year in the dataset. The median price, specified by the black line in each box, is relatively stable over the five-year span.</p>
<pre class="r"><code>p &lt;- ames_df %&gt;% select(neighborhood, year_sold, sale_price) %&gt;% 
  group_by(year_sold) %&gt;% 
  mutate(avg_sale_price = mean(sale_price),
         year_sold = as.factor(year_sold)) %&gt;% 
  arrange(year_sold) %&gt;% 
  ggplot(aes(year_sold, sale_price)) +
  geom_boxplot() +
  theme(legend.position = &#39;none&#39;) +
  scale_y_continuous(labels = comma)

n &lt;- ggplotly(p)
n</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"x":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],"y":[149900,157500,169000,252000,192100,183500,222000,170000,187500,202000,185000,320000,240000,250000,239900,309000,274725,270000,183500,165600,176500,130000,239000,275000,457347,545224,356383,556581,361919,535000,401179,438780,169000,145000,318000,319000,470000,202500,229000,235000,190000,169000,241500,188900,207500,250000,179900,172000,294323,184500,153500,162900,181000,155000,138800,116050,88000,97500,190000,105500,125500,83000,116000,91500,118000,89000,108000,94500,146300,145000,123000,137500,144000,315000,412083,342643,252000,465000,293000,415000,326000,325300,309000,300000,275500,338500,345000,344133,298236,329900,360000,281000,372397,378000,374000,437154,275000,279000,185850,282500,202500,202665,332200,310090,171750,169990,170440,169985,179665,219210,174190,172785,258000,185101,210250,234000,215000,246990,178740,225000,167240,156820,213490,264561,246578,192140,183200,178000,201490,230500,180000,172400,215000,199900,173000,287602,230000,348000,286000,300000,625000,405000,280000,258000,350000,584500,321000,290000,315000,252000,336820,423000,290000,232000,199000,198600,405749,232600,266000,186500,200825,197000,185000,176000,187750,139500,186800,132000,142500,158000,184000,184900,187000,175900,248500,172000,151000,150000,107000,119900,129500,125000,119500,144000,151000,126000,116000,133500,120875,137000,124000,135000,129200,260000,260000,334000,310000,268000,262000,176400,197000,151000,147400,149900,144152,166000,183900,165000,139000,200000,221000,270000,165000,214000,188000,190000,170000,385000,146500,170000,262500,179900,250000,165150,164500,140000,135500,142000,155000,157500,138500,140000,124400,158000,146000,190000,136500,129900,145000,185900,160000,167000,157500,140000,150000,151500,129800,137000,137000,121600,85500,79900,127000,161000,146500,135000,137900,133000,137000,121000,119000,172000,98600,226000,118000,235000,135000,132500,143000,132000,145250,162000,148000,141000,153000,134450,135960,156000,140000,139500,155000,127000,133500,125000,142000,167000,159000,180000,127000,112000,99800,117000,108480,68000,86900,120000,155500,80000,105000,160000,170000,160000,159950,165000,159000,147000,115000,159500,120000,129900,183000,157500,277500,207500,147500,135000,109500,109900,133700,81400,87500,93500,119000,141000,146000,155000,134500,120000,105000,124000,169000,107000,135000,111500,156500,178000,139900,105000,110000,111500,108000,111500,124000,105000,116000,96900,135500,139000,61500,120000,126175,64000,137000,87000,163000,155000,79000,144000,114504,157000,125000,475000,93500,125000,64500,100000,140200,202500,159000,119900,114500,115000,75000,88000,80500,149000,110000,110500,89000,113000,109000,220000,129000,117000,52500,107000,116500,72000,119500,125500,91000,84500,90000,137500,150000,131000,130000,125000,80000,157000,148000,90000,154500,153600,164500,132000,142500,158000,149500,165000,180000,160500,156500,157000,172500,155000,170000,105000,145000,168000,278000,164000,225000,130000,142500,148400,190000,146000,128000,225000,274970,235000,415000,182000,135000,137000,136900,149900,123500,93000,91500,180000,209000,215000,224500,229800,183600,194000,193879,221500,204900,239799,233555,260000,294900,209700,225000,181000,220000,190000,180000,280000,158900,148000,145000,187000,193000,156000,235000,217000,214000,196000,217000,200000,192500,205000,132500,157500,174000,128500,128500,149900,119900,137000,255000,222000,214000,220000,275000,197000,230000,268500,210900,227000,237000,274300,216837,133000,155900,233230,207000,195000,200000,203160,195800,212900,196500,198000,173900,163990,164990,98000,149900,102000,127500,127500,119900,196500,117250,229000,145000,140000,142500,134000,130000,130000,137500,130000,97900,92000,107000,81000,104900,115000,125000,116000,83000,118500,35000,121000,160000,140000,137000,128000,160000,138887,149000,102000,167000,200100,131000,112000,140000,195000,230000,194000,137500,250000,218000,239000,199500,210000,230000,217500,257000,157000,223000,102000,145400,72000,85000,106500,139000,108000,51689,35311,115000,78000,375000,300000,242500,145000,209000,135000,148000,171000,335000,230000,250764,228000,176000,180000,250000,202000,312500,320000,369900,359900,81500,215000,164000,153500,84500,104500,127000,151400,126500,146500,73000,79400,140000,92000,87550,79500,90500,71000,150900,188000,160000,131000,142500,131000,132000,170000,188000,167300,167000,244000,268000,225000,168000,177000,169000,161500,251000,160000,180000,178750,176000,204000,160000,160000,163900,168000,154204,170000,207500,182000,212000,377426,349265,591587,155000,319900,392000,441929,455000,182900,174000,178000,176000,213000,192000,190000,195000,148000,151500,197000,192350,152000,170000,175000,175000,197900,174000,178900,139000,143250,184000,155000,133000,119500,123000,110000,128000,120500,133000,155000,177000,113500,113000,113700,106000,122500,128000,155000,142500,129250,356000,314813,318000,322400,318000,345474,415298,492000,338931,450000,280000,479069,395000,380000,250000,440000,418000,500067,260116,317000,319500,325624,372000,342000,354000,350000,285000,281500,245700,232698,250000,194700,204000,200000,207000,209500,209500,202500,280000,277500,318061,221370,200000,181755,176000,178900,168165,171925,198444,203000,179540,176485,181134,156932,166000,177594,173500,172500,194201,226500,185485,259000,188500,175000,215000,206580,183500,165500,211000,181000,219500,175000,170000,162000,187000,185000,745000,384500,248000,466500,410000,322500,252000,755000,269790,315750,290000,290000,430000,263000,330000,213133,260261,320000,282922,215000,419005,255000,147000,235876,311872,248328,227000,260000,225000,249000,307000,250000,221300,208900,210400,255000,212109,270000,303477,310013,249700,227875,261329,253000,265000,340000,146000,147000,149000,181000,201000,191750,179000,215000,179200,128000,144000,144000,120750,132500,132000,132500,129000,143900,145000,128500,125500,300000,294000,129000,171000,147000,302000,285000,214000,166000,193800,208900,194000,207500,199900,164700,176500,176000,168500,177000,177000,148800,174000,239000,204000,301000,312500,279700,255000,194000,218000,213750,187000,181500,373000,190000,226000,143450,240050,162500,164000,185000,188500,255000,136905,158500,175500,127000,127000,143000,156000,144000,119000,103000,139900,151500,126500,145000,120000,124000,106500,140500,137500,117600,163500,161000,158000,224500,147000,200000,181900,150750,101800,124000,138500,39300,64500,64000,112000,165000,144000,137000,105000,146500,126000,175000,158500,114500,144000,129000,141000,131000,142100,139000,157900,139400,150000,120000,174850,116000,135000,163500,130000,129500,142000,128600,125000,136000,134500,127000,130000,115000,116900,132000,153000,112500,138000,135000,156000,301600,109000,103200,128500,64500,148000,86000,172000,120000,128500,135000,122900,119200,143000,119000,102000,129000,135000,152000,140000,152000,156500,141000,99000,187000,169500,125500,130000,103000,132000,127500,89500,140000,99900,100000,130000,135000,120000,89471,85000,108500,137000,110500,100000,184900,145000,125000,114000,90000,144100,117500,124500,185000,133900,152000,153500,159500,87000,104500,110000,136500,128250,144000,210000,135000,128000,131000,113000,126000,132000,131750,132500,137500,132000,127500,102000,200000,180500,165000,90000,153575,140000,136000,113000,117000,169500,139400,202500,127000,141000,212300,161000,99500,101000,109900,128500,122000,87000,50000,219000,200500,126000,108500,130000,158450,115400,118500,165000,123000,129000,125000,108000,119900,115000,134500,127000,129000,143500,129000,187000,158000,112000,165250,150000,137000,89500,302000,182000,211000,216000,130000,109900,255000,243000,154000,118000,80000,150000,86000,130000,125000,136500,96000,120000,228500,179900,225000,301000,238000,228500,220000,383970,424870,250000,360000,279500,200141,246500,276000,203000,155835,194000,195400,217000,212999,175900,191000,176432,277000,207000,277000,240000,187500,279000,139500,126000,177500,175000,211000,146000,147900,123600,204750,235500,217000,190550,217500,226000,180000,131000,153500,160000,134900,130000,120000,112500,122000,127000,117000,305900,228500,270000,192000,213000,200000,267000,228000,275000,211000,285000,240000,131500,246900,219500,185000,179400,213500,179600,173500,167840,168675,167000,140000,118500,110000,94750,122000,110000,118500,133500,148000,141000,155000,157000,171500,183850,184750,140000,131750,61500,111000,98500,79000,108500,110000,112000,125000,79275,119000,200000,150000,165000,96500,136500,146500,175000,148500,141500,189950,135000,164000,90350,139000,119750,145000,145000,238000,153500,239000,359100,188000,220000,140000,315000,259500,257500,219500,217000,201000,215000,123900,170000,200000,198000,200624,315000,115000,141000,87000,129850,100000,150909,75200,118400,67000,152000,68104,119600,140000,124900,375000,235000,183500,156000,134000,215000,245000,210000,148000,143000,244000,330000,170000,257000,231713,267300,265900,239000,248900,174000,187500,204000,180500,187500,282000,178000,270000,279900,186700,283463,392000,281213,147000,130000,140000,132250,143000,168000,129900,134000,85500,106500,93900,75000,84500,75190,146800,153500,188000,196000,157000,138000,129500,80000,129500,135000,124500,139000,93500,124500,176500,237500,206900,187500,165000,195500,192000,173000,177900,175000,286000,247900,180000,180000,181000,183000,188000,194500,185000,189000,188500,355000,325000,387000,115000,334000,133000,215000,226500,175500,181900,235000,220000,272000,161000,175000,185000,146900,292500,180000,159900,205000,157000,306000,133000,151000,111900,123000,111250,181000,103400,100000,100500,106000,85400,89500,111750,140000,143000,148500,110000,394617,426000,385000,446261,317500,372402,417500,383000,390000,460000,379000,250000,316000,615000,412500,284000,284000,421250,370000,336860,367294,192000,274000,266000,370967,234250,219500,155000,154000,207000,195000,219990,191000,159895,187687,179000,193000,190000,176000,188000,213000,217300,186500,226750,184000,176000,225000,185900,284500,315000,250000,291000,350000,279500,290000,350000,341000,287500,271000,301500,235128,214000,232000,240000,264132,245000,227680,257000,297900,247000,212700,250580,182000,226700,250000,250000,339750,205950,256000,230348,207500,141000,188000,192500,146000,159000,155000,173000,170000,182000,163000,193500,189000,190500,175000,179200,187000,193000,153900,128000,144000,135000,115000,119916,142000,192000,140000,290000,372500,196000,171900,178000,165000,146000,146000,179400,172900,300000,285000,290000,305000,328900,160000,170000,223000,170000,200000,345000,245500,217500,324000,162500,150000,290000,205000,174000,183000,150000,145000,215000,140500,240000,141000,147000,135000,145000,142600,135000,170000,299800,185000,173000,178400,176000,98000,109008,135750,155000,180500,174900,140000,145000,179900,168500,140000,145500,142000,141000,153000,72500,52000,118000,87000,141500,119000,141500,165500,112900,201800,163000,139950,174000,165000,227000,135000,124000,140000,136500,185000,163000,166800,139000,166000,136000,133000,116000,137500,130000,180000,139000,110000,100000,118500,146000,89900,114000,140000,86900,139000,106250,171000,139000,186000,157000,148000,242000,116000,94000,98300,127000,159000,125900,155000,138000,112500,105500,127500,130000,150000,109500,140000,167900,136870,143000,73000,157500,122600,111000,256000,64000,139500,118000,200000,119164,122250,120000,155000,78000,95000,115000,147000,140000,46500,112500,107900,65000,295000,139500,153900,132000,98000,114000,130000,129500,129400,161000,163000,128000,122000,116900,325000,55000,184000,110000,131500,97000,115500,138000,108000,79500,153000,109500,124000,106900,164900,119000,120000,157000,105000,113000,115000,79000,123000,81300,162900,150000,123500,129900,128000,68500,127000,207000,184000,162500,145000,130000,160000,161000,127500,93850,136000,141000,120000,127500,127000,89500,125000,79900,85000,82375,135000,124000,134000,135000,134432,127500,148000,129500,157500,109900,145000,130000,153000,120000,152000,108959,95541,80000,149350,144900,185000,165000,235000,140000,108000,145000,152400,144000,173000,192000,245000,241500,256000,177000,125600,155000,240000,260000,185000,235000,159900,99600,134500,119000,107500,125000,79000,95000,262280,260000,226500,225000,229000,177439,248500,475000,395039,228000,225000,195000,200000,155000,144000,145000,226001,215700,207500,193000,188000,191000,221000,231500,235000,223500,130250,149900,158000,147000,143195,163000,110000,127000,124900,230000,237000,235000,230500,230000,222500,287000,274000,300000,255900,224900,240000,183000,207000,210000,136500,145000,208900,185000,214000,208500,186500,210000,185900,179900,218836,193000,189000,149300,141000,149000,144500,85000,145900,123000,147500,165000,135000,108000,137500,165400,147000,160500,176000,284700,160000,148000,82000,82000,118000,82500,91900,120000,96000,99000,130500,135000,135500,100000,108000,98000,67000,135900,140000,179500,136500,168000,130000,189000,161900,145000,191000,177000,147500,91000,231000,115000,138000,149000,188700,198000,110000,104000,257076,381000,311500,263400,236500,224000,116500,151000,126000,120000,55000,120500,120500,119000,126000,99500,165500,13100,89000,40000,80900,81000,65000,392500,294464,250000,275000,300000,271000,213000,171000,171500,100000,228500,228950,241500,287000,294000,293077,264966,172500,167500,218689,150000,184000,180000,175000,232500,195000,305000,298751,370000,209200,206300,146000,160500,173000,124000,115000,129500,105000,94900,152500,98000,81000,113000,128500,119500,130500,138000,134500,160000,137500,172000,103000,124500,157000,345000,189500,270000,189000,377500,168500,375000,278000,240000,239500,177500,185000,191000,178000,185000,181316,166000,178000,174000,173000,225000,180500,187500,501837,372500,260000,185000,260000,181000,82500,215000,154000,200000,249000,187500,184000,278000,157000,152000,197500,240900,263435,220000,235000,213000,167900,158000,165000,158000,136000,148500,156000,128000,143000,76500,120500,124500,97000,130000,111000,125000,112000,97000,118000,119500,143750,146000,148500,123000,147000,137900,147000,148500,138000,128500,100000,148800,337500,462000,485000,555000,325000,256300,253293,398800,335000,404000,402861,451950,610000,582933,360000,296000,409900,255500,335000,274900,300000,324000,350000,280000,284000,269500,233170,386250,445000,290000,255900,213000,196000,184500,212500,230000,552000,382500,320000,248500,286500,254000,173000,173000,184000,167800,174000,174000,174000,175900,192500,181000,180000,160200,188500,200000,170000,189500,184100,195500,192000,178000,207500,236000,257500,244000,167000,179000,190000,156000,245000,181000,214000,168000,337000,403000,327000,340000,336000,265000,315000,260000,260000,263550,402000,248000,244600,275000,257500,287090,275500,245000,253000,468000,252678,210000,208300,225000,229456,229800,250000,370878,238500,310000,270000,252000,241000,264500,291000,263000,185000,234500,209000,159000,152000,143500,193000,203000,184900,159000,142000,153000,224243,220000,257000,189000,171500,120000,145000,184000,162000,160000,82000,76000,110000,135000,141000,122000,124100,129000,131400,62383,123000,275000,235000,280750,164500,173733,222000,195000,172500,180000,156000,172500,318750,211500,241600,180500,150000,154000,185000,185750,200000,206000,162000,256900,197900,163000,113000,230000,167900,213250,227000,130000,143000,117500,168500,172500,161500,141500,118000,127500,140000,177625,110000,167000,153000,145100,154000,177500,158000,124500,174500,122000,82500,110000,149500,175000,167000,128900,140000,147000,124000,187500,159000,256000,205000,193500,110000,104900,150000,156500,176000,149500,139000,155000,120000,153000,144000,176000,153000,135000,131000,123000,126000,115000,164900,113000,145500,102900,95000,152500,129900,132000,99900,135000,149000,114000,109500,125000,142900,156500,59000,105000,106000,78500,190000,154000,163000,200000,143500,135000,153000,157500,113500,133000,92900,128500,90000,138000,128000,139000,118900,138000,132500,133500,135000,144750,145000,127000,109500,115000,110000,128900,103500,66500,130000,129000,150000,107500,94550,124500,135000,103000,93000,129500,93000,80000,45000,37900,91300,99500,113000,87500,110000,106000,265979,160000,119000,168000,58500,143000,85000,124900,119000,146500,34900,44000,223500,149000,205000,137000,121000,128000,134900,117000,132500,93000,119000,100000,141500,133000,60000,105000,115000,150000,126500,214500,167500,155000,155000,179900,104000,62500,149000,103000,123000,97500,135000,70000,116000,88750,179000,179000,159900,61000,103600,63000,175000,139000,172500,113500,130000,149900,134900,137000,139000,165000,148000,165000,63900,161500,143000,135000,82500,190000,139600,122000,127500,121500,60000,154400,113000,125000,84000,139500,131000,105000,108000,162000,156500,316600,271900,213000,239900,239500,131000,118964,153337,147983,118858,118858,142953,148325,113722,269500,269500,269500,323262,297000,295493,332000,239900,212000,272500,239000,220000,200000,221800,194500,237000,173000,275000,233500,185000,152000,143000,231500,212000,207000,145000,138000,197900,204000,192000,200000,195000,227000,230000,187100,203000,201000,124000,140000,134900,150500,136500,143500,133500,123000,133900,133000,250000,254750,236500,261500,313000,198500,211000,220000,203000,279500,210000,219500,191000,178000,213000,144000,140000,293200,190000,190000,173500,170000,108000,167000,100000,198500,159500,127000,125000,320000,145500,118000,85000,120000,98000,99900,82000,119900,103500,112000,110000,122000,117000,160000,159434,60000,139500,197000,105000,135000,147500,137450,155000,177000,145000,137000,234000,205000,177500,160000,155000,163500,154900,205000,144800,174500,193000,158000,158500,224000,115000,137000,121000,124000,208000,315000,222000,147000,123000,78000,85000,75000,230000,57625,251000,239686,240000,215000,156450,173000,126000,173000,152000,137500,375000,315500,224500,410000,316500,201000,175000,204000,213500,220000,170000,315000,425000,139500,115000,162000,165000,91000,130000,86000,160000,80000,97000,88000,131900,131250,165500,112000,149000,143000,130000,196000,173000,215000,105000,172000,244000,189900,195500,213500,191500,236500,189000,175900,185000,180400,171500,212000,538000,164000,394432,141000,210000,190000,170000,216000,149000,149900,142000,126000,115000,184000,96000,105500,88000,127500,149900,120000,146000,376162,306000,395192,290941,220000,275000,259000,214000,611657,224000,500000,320000,319900,205000,175500,199500,160000,192000,184500,216500,185088,180000,222500,333168,355000,260400,325000,290000,221000,410000,221500,204500,215200,262500,254900,271500,233000,181000,205000,143000,189000,99500,125000,194500,152000,171000,67500,112000,148000,138500,122000,133000,127000,169000,190000,362500,285000,260000,190000,155000,151000,149500,152000,222000,177500,177000,155000,147110,267916,254000,155000,206000,130500,230000,218500,243500,205000,212500,196500,197500,171000,142250,143000,128950,159000,178900,136300,180500,137500,84900,142125,197600,172500,116500,76500,128000,153000,132000,178000,154300,180000,190000,135000,214000,136000,165500,145000,148000,142000,167500,108538,159500,108000,135000,122500,119000,109000,105000,107500,144900,129000,97500,144000,162000,242000,132000,154000,166000,134800,160000,148000,192000,155000,80400,96500,109500,115000,143000,107400,80000,119000,130000,119000,129000,100000,12789,105900,150000,139000,240000,76500,149700,125500,122500,140750,128500,209500,87000,134000,128000,132000,139900,123900,138400,109500,140000,149500,159900,122000,110000,55000,140000,244400,173000,107500,100000,95000,93369,114900,94000,136000,136500,131500,121500,125000,154000,137900,158000,137250,160250,163000,158900,328000,270000,85000,128000,260000,230000,124000,83000,144500,129000,127000,128000,186000,308030,114000,84900,178000,270000,218000,236000,147000,245350,206000,198900,187000,320000,138500,155000,159000,191000,200500,150000,161750,128200,127000,318000,272000,237000,240000,224900,143750,143000,232000,213000,185500,84900,155891,100000,144000,64000,125200,107000,90000,140000,113000,80000,144500,104000,128000,58500,127000,126000,160000,100000,169000,257500,215000,266500,335000,203135,185000,162500,289000,125500,82000,110000,68400,102776,55993,50138,246000,254900,190000,201000,169900,170000,160000,220000,179781,174000,269500,214900,202900,378500,169000,173500,139000,166500,83500,119500,85000,76000,75500,88250,85500,130000,157900,149900,159000,136000,161000,285000,231000],"hoverinfo":"y","type":"box","fillcolor":"rgba(255,255,255,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"},"size":5.66929133858268},"line":{"color":"rgba(51,51,51,1)","width":1.88976377952756},"showlegend":false,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":66.4840182648402},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["2006","2007","2008","2009","2010"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["2006","2007","2008","2009","2010"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"year_sold","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-24321.55,792110.55],"tickmode":"array","ticktext":["0","200,000","400,000","600,000"],"tickvals":[0,200000,400000,600000],"categoryorder":"array","categoryarray":["0","200,000","400,000","600,000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"sale_price","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"6f766eda12e2":{"x":{},"y":{},"type":"box"}},"cur_data":"6f766eda12e2","visdat":{"6f766eda12e2":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="geospatial-analysis" class="section level2">
<h2>Geospatial analysis</h2>
<p>The dataset includes longitude and latitude coordinates for each house. Using the leaflet package, we can plot the house locations by neighborhood. In addition, we can weight the circle size based on sale price. In order to better visualize the individual circles, <code>dplyr::slice_sample()</code> can be used to randomly sample a limited number of houses. We will select 600 house locations to plot on the Leaflet map shown below.</p>
<pre class="r"><code>library(RColorBrewer)
pal &lt;- colorFactor(
  palette = &#39;Dark2&#39;,
  domain = ames_df$neighborhood
)

library(RColorBrewer)
pal &lt;- colorFactor(
  palette = &#39;Dark2&#39;,
  domain = ames_df$neighborhood
)
ames_random_samp &lt;- ames_df %&gt;% 
  slice_sample(n = 600)

ames_random_samp %&gt;% group_by(neighborhood) %&gt;% leaflet(data = .,
        options = leafletOptions(zoomControl = FALSE,
                                 minZoom = 13, maxZoom = 13, dragging = FALSE)) %&gt;% 
  addTiles() %&gt;%  
  addCircles(~longitude, ~latitude, color = ~pal(neighborhood), radius = 1, weight = ~sale_price*2e-5, opacity = 1)</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"options":{"minZoom":13,"maxZoom":13,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false,"dragging":false},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircles","args":[[42.011343,42.050222,42.0195855,42.062299,42.022607,42.0333765,42.036027,42.036223,42.021788,42.016709,42.049528,42.035333,41.997992,42.02774,41.994727,42.061879,42.031542,42.027032,42.019092,42.053314,42.042304,42.0459325,42.052507,42.059599,42.036575,42.033369,42.059956,42.044921,42.051661,41.9927922,42.053666,42.0343116,42.017737,42.034673,42.056673,42.020441,42.054368,42.06128,42.01869,42.0418699,42.01972,42.019691,42.0242331,42.051657,42.0543376,42.037093,42.030621,42.047711,42.02152,42.061915,42.061437,42.054514,42.017858,42.052659,42.047595,42.051382,42.030232,42.059242,42.017423,42.046145,42.045483,42.035489,42.032272,42.021555,42.0430839,42.0347,42.042233,42.047618,42.042485,42.052758,42.016961,42.048058,42.0276972,42.019069,42.05139,42.02224,42.0158534,42.018857,42.034906,42.061365,42.05443,42.037214,42.051681,42.042023,42.056702,41.992479,42.0459375,42.037636,42.016072,42.04498,41.994241,42.028004,42.032418,41.996672,42.034754,42.0381282,42.063031,42.021386,42.062257,42.054562,42.049216,42.035443,42.032302,42.034421,42.037103,42.051074,42.019996,42.0272703,41.997906,42.038515,42.017856,42.013467,42.056983,42.04795,42.02103,42.022653,42.018786,42.055318,42.018848,42.059957,42.017083,42.05996,42.032305,42.0214037,42.061326,42.061981,42.029556,42.03013,42.024126,42.032367,42.057467,42.053916,42.033557,42.031347,42.051245,42.032493,42.053108,42.026414,42.034753,42.047467,42.051795,42.061727,42.027997,42.032108,42.035954,42.022227,42.05198,42.03069,42.053801,42.026723,42.04297,42.032343,42.033996,42.053395,42.033699,42.029772,42.062374,42.043952,41.991933,42.0268089,42.044125,41.995359,42.034603,42.0598989,42.032365,42.025666,42.058581,42.016973,41.993062,42.040296,42.061096,42.052332,42.052102,42.022228,42.023548,42.057179,42.061242,42.03246,42.042577,42.025306,42.048947,42.028226,42.018592,42.049771,42.04124,42.025818,42.033008,42.0299664,42.0492538,42.032681,42.0165794,42.03548,42.045685,42.06076,42.058401,42.038127,42.026548,42.055154,42.059408,42.03457,42.045473,42.026547,42.01469,42.017103,42.019004,42.021168,42.036852,42.033347,42.0591,42.032575,42.028963,42.016978,42.060377,42.021811,42.02752,41.99217,42.035287,42.0488934,42.062067,42.059375,41.993335,42.01797,41.995175,42.046476,42.036905,42.033604,42.058619,42.046418,42.037258,42.063294,42.061193,42.022709,42.033563,41.994284,42.047615,42.033568,42.014943,42.060353,42.035841,42.046137,42.019926,42.025102,42.059304,42.016217,42.016067,42.034595,42.034811,42.046827,42.022963,42.016086,42.058886,42.060425,42.055081,42.020592,42.033558,42.034757,42.053364,42.0255246,42.055517,42.027854,42.035675,42.026458,42.023021,42.063301,42.03128,42.016957,42.058439,42.057164,42.047699,42.0345614,42.044383,41.998952,42.044821,42.018722,42.039235,42.049672,42.063141,42.051717,42.0471033,42.05346,42.017186,42.030062,42.0392,42.06257,42.062903,42.017609,42.031499,42.037923,42.051678,42.034574,42.055757,42.019849,42.036095,42.019697,42.022136,42.021209,42.017569,42.037097,42.02821,42.058421,42.022825,42.036178,42.022478,41.988729,42.044758,42.040326,42.057839,42.017889,42.0347301,42.016913,42.035678,42.0586718,42.03338,42.020991,42.039202,42.033642,42.050307,42.03247,42.046114,42.016887,42.021113,42.031566,42.02868,42.058484,42.016618,42.01601,42.060431,42.018648,42.018864,41.9887374,42.022659,41.99854,42.046882,42.019032,41.992533,42.052119,41.986647,41.997352,42.043821,42.053459,42.049322,42.06132,42.028426,42.056955,42.051297,42.033366,42.050909,42.058368,42.035756,42.042961,41.994188,42.062086,42.051684,42.047452,42.033496,42.062108,42.019005,42.025687,42.033427,42.028191,42.0384781,42.001694,42.063301,42.0272,42.017026,42.0524739,42.02521,42.01141,42.023229,42.044843,42.052353,42.047666,42.046825,41.990921,42.013512,42.0623985,42.062434,42.035787,42.033454,41.991708,42.059242,42.016004,42.052347,41.988076,42.02616,42.023308,42.022088,42.042124,42.0261614,42.046088,42.029694,42.03528,42.03392,42.031362,42.035876,42.02153,42.031461,42.034686,42.053186,42.034509,42.032396,42.040745,42.01789,42.041811,42.044883,42.033493,42.061901,42.034748,42.021207,42.047687,42.055147,41.995973,42.041146,42.0189256,42.030187,42.033489,42.050406,42.0303597,42.055358,42.034858,42.012638,42.027555,42.035854,42.031381,42.060466,42.061664,42.057124,42.025893,41.986509,42.03128,42.062081,42.05288,42.025001,42.057177,42.022951,42.021388,42.031483,41.996919,41.991493,42.051685,42.02297,42.034789,42.061178,41.992975,42.0320748,42.044083,42.036002,42.0242588,42.057419,42.0004101,42.062285,41.990054,42.034747,42.055102,42.036535,42.0298532,42.034988,42.03337,42.034569,42.047103,42.044735,42.028287,42.031415,42.015765,41.98651,41.997126,42.03142,42.060936,42.034602,41.99261,42.037125,42.029142,42.044218,42.034761,42.041243,42.061504,42.033279,42.050134,42.044058,42.025796,42.0282,42.017517,42.044735,41.995278,42.03224,42.0347206,42.06048,42.039983,42.033662,42.057102,42.024143,42.01917,42.0533209,42.01686,42.052278,42.032699,42.035867,42.0347572,42.016276,42.043236,42.015713,42.036051,42.063381,42.053441,42.03131,42.027664,42.059743,42.060265,42.018707,42.017749,42.030601,42.033631,42.050682,42.058377,42.024673,42.0168729,42.032399,42.031215,42.009401,42.051835,42.019617,42.05738,42.027154,42.037162,42.048191,42.041874,42.033385,42.027507,42.0198028,42.038349,42.025258,42.034411,42.0272703,42.0249549,42.061544,42.036849,42.016797,42.0349702,42.023218,42.039351,42.039568,42.04378,42.061394,42.025173,42.0623,42.018188,42.0319053,42.009398,42.016853,42.051798,42.018812,42.023916,42.016152,42.015974,42.034576,42.05142,41.996327,42.053014,42.030267,41.987686,42.01873,42.045632,42.03807,42.032478,42.018282,42.051793,42.0422973,42.014549,42.017106,41.991574,42.027506,42.061678,42.008687,42.039369,42.054318,42.063129,42.028847,42.019548,42.01899,42.0288284,42.0314669,42.032301,42.048606,42.037247,42.0218643,42.038398,42.030611,42.059526,42.043038,42.035862,42.034848,42.052522,42.026752,41.991144,42.05695,42.043306,42.031293,42.0249982,42.034428,42.051073],[-93.643548,-93.625696,-93.678267,-93.640958,-93.628409,-93.6279815,-93.615616,-93.620336,-93.68317,-93.683856,-93.653479,-93.669688,-93.644366,-93.606196,-93.653039,-93.636373,-93.626116,-93.616996,-93.646748,-93.657851,-93.613383,-93.618143,-93.63745,-93.634231,-93.629661,-93.620433,-93.639388,-93.622834,-93.629456,-93.6072813,-93.65412,-93.6267116,-93.650321,-93.662134,-93.622971,-93.628298,-93.637875,-93.657483,-93.679147,-93.6219226,-93.684837,-93.684954,-93.6246096,-93.650279,-93.6326645,-93.603705,-93.682175,-93.646653,-93.60775,-93.644411,-93.652884,-93.64396,-93.682686,-93.6193873,-93.644891,-93.64357,-93.670514,-93.639068,-93.690276,-93.645606,-93.633748,-93.629499,-93.615447,-93.613886,-93.6177041,-93.686264,-93.61588,-93.644891,-93.621344,-93.627396,-93.687786,-93.650057,-93.6148612,-93.685523,-93.619562,-93.6558,-93.6439975,-93.648416,-93.620497,-93.640051,-93.655739,-93.606786,-93.648742,-93.612394,-93.625169,-93.601827,-93.6184183,-93.692245,-93.647027,-93.618625,-93.650588,-93.655924,-93.622415,-93.607252,-93.62008,-93.6192014,-93.644627,-93.686678,-93.654567,-93.637825,-93.619383,-93.62919,-93.666813,-93.662239,-93.658232,-93.630231,-93.673571,-93.6051157,-93.649773,-93.61722,-93.681274,-93.684271,-93.6514849,-93.6269,-93.671454,-93.606593,-93.689772,-93.624373,-93.663458,-93.626337,-93.651635,-93.639062,-93.614615,-93.6258429,-93.636972,-93.633739,-93.625623,-93.618662,-93.665799,-93.672288,-93.650238,-93.638853,-93.660671,-93.672645,-93.643173,-93.683235,-93.641251,-93.688993,-93.604568,-93.647488,-93.648778,-93.644094,-93.655786,-93.615599,-93.607963,-93.691896,-93.657271,-93.676659,-93.654444,-93.622793,-93.614768,-93.615446,-93.6289369,-93.627112,-93.625589,-93.685125,-93.641321,-93.612347,-93.603458,-93.6047622,-93.61864,-93.646816,-93.660672,-93.6547754,-93.672241,-93.690342,-93.640959,-93.686744,-93.604279,-93.622076,-93.626477,-93.629462,-93.638366,-93.691971,-93.661005,-93.651163,-93.637189,-93.623644,-93.621352,-93.628299,-93.628857,-93.662762,-93.663302,-93.635367,-93.610649,-93.66061,-93.673401,-93.6241649,-93.6343272,-93.659205,-93.6447118,-93.686417,-93.624612,-93.633797,-93.642836,-93.691068,-93.66798,-93.62655,-93.639151,-93.669708,-93.614751,-93.667904,-93.683732,-93.644544,-93.664812,-93.671304,-93.689136,-93.623515,-93.635716,-93.662039,-93.608901,-93.685673,-93.6531488,-93.683468,-93.622147,-93.603111,-93.680198,-93.6256036,-93.6443,-93.634513,-93.608343,-93.664925,-93.650431,-93.631851,-93.6888,-93.675551,-93.6545189,-93.645482,-93.69124,-93.639915,-93.642447,-93.62841,-93.624566,-93.649096,-93.631554,-93.625584,-93.640762,-93.656737,-93.608903,-93.639931,-93.673197,-93.666095,-93.631633,-93.644698,-93.646416,-93.68782,-93.610604,-93.615686,-93.628263,-93.648415,-93.6545189,-93.654734,-93.635056,-93.675297,-93.628848,-93.606893,-93.655711,-93.6259506,-93.64403,-93.621504,-93.672318,-93.660227,-93.671511,-93.642326,-93.608954,-93.644704,-93.629357,-93.65414,-93.646607,-93.6050674,-93.648204,-93.644884,-93.630714,-93.686218,-93.6277409,-93.627232,-93.654243,-93.648809,-93.6261431,-93.628047,-93.681895,-93.62726,-93.621503,-93.641635,-93.634265,-93.644307,-93.62454,-93.691868,-93.62765,-93.613899,-93.643769,-93.675175,-93.624601,-93.685068,-93.685742,-93.688302,-93.690324,-93.610772,-93.661562,-93.636949,-93.657241,-93.622644,-93.664779,-93.606856,-93.624758,-93.626785,-93.641377,-93.64672,-93.6071073,-93.688577,-93.685185,-93.6225667,-93.625728,-93.683309,-93.621399,-93.625737,-93.648255,-93.665505,-93.645478,-93.64842,-93.671454,-93.683226,-93.676272,-93.656958,-93.683777,-93.642597,-93.629016,-93.671612,-93.681196,-93.6086884,-93.659222,-93.649757,-93.615535,-93.692286,-93.602043,-93.64397,-93.600582,-93.662162,-93.632554,-93.625373,-93.615524,-93.641416,-93.625556,-93.641312,-93.618504,-93.621532,-93.652972,-93.649649,-93.683957,-93.645544,-93.601779,-93.642914,-93.627536,-93.647988,-93.621677,-93.654437,-93.648411,-93.688937,-93.666432,-93.660664,-93.612075,-93.647403,-93.642116,-93.608707,-93.676608,-93.6292319,-93.67358,-93.643539,-93.671221,-93.623485,-93.638554,-93.653482,-93.651773,-93.60019,-93.684536,-93.657049,-93.657444,-93.61061,-93.656231,-93.600439,-93.633245,-93.684116,-93.642773,-93.603916,-93.658081,-93.688934,-93.656664,-93.623636,-93.62188,-93.647047,-93.685142,-93.612254,-93.662134,-93.673601,-93.607963,-93.625147,-93.622552,-93.608903,-93.643449,-93.65921,-93.62026,-93.618481,-93.646288,-93.626171,-93.61513,-93.622102,-93.658226,-93.605943,-93.688372,-93.646576,-93.626231,-93.606933,-93.627809,-93.6459433,-93.625825,-93.608868,-93.648275,-93.6112887,-93.636511,-93.610605,-93.640311,-93.665571,-93.6139,-93.620241,-93.63736,-93.636146,-93.652565,-93.622025,-93.606925,-93.672523,-93.642911,-93.637043,-93.663517,-93.655483,-93.623814,-93.686629,-93.622402,-93.604548,-93.599866,-93.62728,-93.606869,-93.618606,-93.633024,-93.652429,-93.619013,-93.616434,-93.60674,-93.6265884,-93.635951,-93.6494462,-93.6424399,-93.610102,-93.677008,-93.642334,-93.677205,-93.6801805,-93.689801,-93.623666,-93.686413,-93.644118,-93.619334,-93.617386,-93.623481,-93.683435,-93.606847,-93.646791,-93.622551,-93.641325,-93.669707,-93.605351,-93.607957,-93.618293,-93.613046,-93.613899,-93.617242,-93.65331,-93.614002,-93.62569,-93.630152,-93.621862,-93.608882,-93.690113,-93.619352,-93.649201,-93.674456,-93.6197518,-93.637566,-93.609148,-93.684102,-93.654853,-93.625154,-93.674327,-93.6575919,-93.68923,-93.643836,-93.659355,-93.61061,-93.6117397,-93.691706,-93.637964,-93.688628,-93.674167,-93.646429,-93.652608,-93.62024,-93.665153,-93.629538,-93.627751,-93.642371,-93.682686,-93.68329,-93.622448,-93.625945,-93.649587,-93.675038,-93.691931,-93.623643,-93.675714,-93.615697,-93.627271,-93.642821,-93.652054,-93.612191,-93.605971,-93.646113,-93.606508,-93.617164,-93.66515,-93.664506,-93.608927,-93.626858,-93.657017,-93.606195,-93.6275675,-93.643964,-93.689021,-93.68167,-93.6574973,-93.605207,-93.612263,-93.604106,-93.631245,-93.628831,-93.66526,-93.636948,-93.685697,-93.6195361,-93.616026,-93.646289,-93.627103,-93.670039,-93.667209,-93.639431,-93.689101,-93.65565,-93.642474,-93.646793,-93.619756,-93.613905,-93.606842,-93.663455,-93.633752,-93.608219,-93.624553,-93.651285,-93.65044,-93.6181153,-93.687825,-93.644669,-93.601089,-93.665994,-93.652084,-93.615993,-93.617075,-93.642069,-93.652941,-93.615578,-93.684887,-93.672379,-93.6096888,-93.6795273,-93.606842,-93.639516,-93.62143,-93.6874333,-93.6124,-93.676455,-93.643641,-93.636879,-93.605968,-93.607801,-93.630348,-93.656924,-93.602559,-93.641342,-93.637531,-93.624687,-93.6277573,-93.666912,-93.655704],1,null,null,{"interactive":true,"className":"","stroke":true,"color":["#E7298A","#B6831A","#BD752B","#D69D0F","#CE5F74","#CF4794","#1B9E77","#1B9E77","#73935E","#73935E","#929443","#9C6C8D","#B27D5D","#9D8545","#B27D5D","#B66866","#CF4794","#9D8545","#8AA919","#929443","#1B9E77","#1B9E77","#7570B3","#66A61E","#CF4794","#9D8545","#B66866","#1B9E77","#E6AB02","#B6599E","#929443","#CF4794","#8AA919","#9C6C8D","#B66866","#CE5F74","#7570B3","#C9633F","#73935E","#1B9E77","#73935E","#73935E","#CE5F74","#D95F02","#7570B3","#1B9E77","#9966A9","#D95F02","#CE5F74","#B66866","#C9633F","#D95F02","#73935E","#1B9E77","#D95F02","#D95F02","#9C6C8D","#B66866","#73935E","#D95F02","#7570B3","#CF4794","#9D8545","#CE5F74","#1B9E77","#9966A9","#1B9E77","#D95F02","#1B9E77","#E6AB02","#73935E","#929443","#9D8545","#73935E","#1B9E77","#BD752B","#E7298A","#8AA919","#1B9E77","#B66866","#929443","#1B9E77","#D95F02","#1B9E77","#B66866","#C9AB0C","#1B9E77","#9966A9","#8AA919","#1B9E77","#B27D5D","#8AA919","#CF4794","#B6599E","#9D8545","#1B9E77","#B66866","#73935E","#C9633F","#7570B3","#1B9E77","#CF4794","#9C6C8D","#9C6C8D","#C69016","#7570B3","#BD752B","#9D8545","#B27D5D","#1B9E77","#73935E","#73935E","#C9633F","#1B9E77","#BD752B","#CE5F74","#73935E","#1B9E77","#BD752B","#66A61E","#8AA919","#B66866","#9D8545","#CE5F74","#B66866","#66A61E","#CF4794","#9D8545","#BD752B","#9C6C8D","#C9633F","#7570B3","#9C6C8D","#9C6C8D","#D95F02","#9966A9","#D95F02","#73935E","#1B9E77","#D95F02","#D95F02","#B66866","#8AA919","#9D8545","#1B9E77","#73935E","#929443","#9C6C8D","#929443","#9D8545","#1B9E77","#9D8545","#CF4794","#1B9E77","#CF4794","#9966A9","#D69D0F","#1B9E77","#C9AB0C","#9D8545","#1B9E77","#B27D5D","#9C6C8D","#C9633F","#9C6C8D","#73935E","#B66866","#73935E","#B6599E","#1B9E77","#66A61E","#E6AB02","#7570B3","#73935E","#BD752B","#C9633F","#B66866","#CF4794","#1B9E77","#CE5F74","#1B9E77","#BD752B","#BD752B","#7570B3","#1B9E77","#8AA919","#9C6C8D","#9D8545","#7570B3","#9C6C8D","#E7298A","#9966A9","#1B9E77","#66A61E","#B66866","#9966A9","#AAAA14","#1B9E77","#B66866","#9C6C8D","#1B9E77","#AAAA14","#73935E","#E7298A","#BD752B","#BD752B","#9966A9","#CF4794","#B66866","#AAAA14","#9D8545","#73935E","#C9633F","#73935E","#9D8545","#C9AB0C","#9966A9","#1B9E77","#B66866","#66A61E","#B6599E","#BD752B","#B27D5D","#7570B3","#9966A9","#9C6C8D","#C9633F","#D95F02","#9966A9","#B66866","#B66866","#CE5F74","#CF4794","#B27D5D","#7570B3","#CF4794","#E7298A","#C9633F","#1B9E77","#D95F02","#BD752B","#BD752B","#66A61E","#E7298A","#E7298A","#9966A9","#1B9E77","#1B9E77","#CE5F74","#8AA919","#C9633F","#C9633F","#7570B3","#BD752B","#CF4794","#1B9E77","#929443","#CE5F74","#D95F02","#9D8545","#9C6C8D","#BD752B","#BD752B","#D69D0F","#9D8545","#E7298A","#66A61E","#C9633F","#D95F02","#1B9E77","#C69016","#B27D5D","#7570B3","#73935E","#1B9E77","#B6831A","#C9633F","#D95F02","#1B9E77","#1B9E77","#73935E","#CF4794","#1B9E77","#D69D0F","#66A61E","#E7298A","#CF4794","#9966A9","#E6AB02","#9D8545","#D95F02","#BD752B","#1B9E77","#73935E","#73935E","#73935E","#73935E","#1B9E77","#BD752B","#B66866","#BD752B","#1B9E77","#BD752B","#B6599E","#1B9E77","#1B9E77","#B66866","#E7298A","#1B9E77","#73935E","#9966A9","#B66866","#CF4794","#73935E","#1B9E77","#CF4794","#D95F02","#9C6C8D","#D95F02","#8AA919","#BD752B","#9966A9","#AAAA14","#C9633F","#73935E","#E7298A","#66A61E","#BD752B","#73935E","#B6599E","#BD752B","#B27D5D","#1B9E77","#73935E","#C9AB0C","#D95F02","#B6599E","#B27D5D","#7570B3","#1B9E77","#1B9E77","#B66866","#CF4794","#B66866","#1B9E77","#CF4794","#929443","#C9633F","#9966A9","#C69016","#B6599E","#D69D0F","#E6AB02","#D95F02","#CF4794","#C9633F","#8AA919","#73935E","#9C6C8D","#BD752B","#1B9E77","#896E46","#D69D0F","#9D8545","#BD752B","#E6AB02","#AAAA14","#E7298A","#BD752B","#1B9E77","#7570B3","#929443","#929443","#B6599E","#73935E","#C9633F","#C9633F","#1B9E77","#AAAA14","#B6599E","#66A61E","#73935E","#D95F02","#B6599E","#8AA919","#73935E","#BD752B","#1B9E77","#9D8545","#D95F02","#9966A9","#9D8545","#9C6C8D","#9C6C8D","#1B9E77","#CE5F74","#CF4794","#1B9E77","#D95F02","#9C6C8D","#9D8545","#1B9E77","#E7298A","#1B9E77","#1B9E77","#CF4794","#C9633F","#1B9E77","#73935E","#D95F02","#1B9E77","#B6599E","#1B9E77","#8AA919","#CF4794","#9D8545","#D95F02","#9D8545","#7570B3","#1B9E77","#E7298A","#BD752B","#9D8545","#9D8545","#B66866","#B66866","#C9633F","#9D8545","#B6599E","#9C6C8D","#D69D0F","#7570B3","#BD752B","#C9633F","#CE5F74","#73935E","#CF4794","#B6599E","#B6599E","#E6AB02","#CE5F74","#1B9E77","#66A61E","#B27D5D","#9D8545","#1B9E77","#1B9E77","#CE5F74","#B66866","#B27D5D","#D69D0F","#B6599E","#9C6C8D","#D95F02","#9C6C8D","#9966A9","#9966A9","#CF4794","#9966A9","#D95F02","#1B9E77","#9D8545","#CF4794","#73935E","#B6599E","#B27D5D","#CF4794","#B66866","#9C6C8D","#C9AB0C","#1B9E77","#9D8545","#1B9E77","#9D8545","#1B9E77","#C9633F","#9D8545","#B6831A","#7570B3","#9D8545","#9D8545","#73935E","#1B9E77","#B27D5D","#9C6C8D","#9D8545","#B66866","#1B9E77","#9966A9","#C9633F","#CE5F74","#BD752B","#929443","#73935E","#D95F02","#9C6C8D","#1B9E77","#9D8545","#73935E","#7570B3","#73935E","#9C6C8D","#B66866","#929443","#9D8545","#BD752B","#66A61E","#66A61E","#E7298A","#73935E","#9966A9","#CF4794","#B6831A","#C9633F","#AAAA14","#73935E","#CF4794","#9C6C8D","#E7298A","#E6AB02","#E7298A","#C9633F","#9D8545","#1B9E77","#D95F02","#1B9E77","#9D8545","#BD752B","#BD752B","#1B9E77","#CE5F74","#9C6C8D","#9D8545","#CE5F74","#B66866","#9966A9","#73935E","#9C6C8D","#CE5F74","#1B9E77","#1B9E77","#7570B3","#66A61E","#BD752B","#B66866","#73935E","#9D8545","#E7298A","#E7298A","#E6AB02","#BD752B","#BD752B","#E7298A","#73935E","#9C6C8D","#D95F02","#B27D5D","#1B9E77","#9D8545","#B6599E","#BD752B","#7570B3","#1B9E77","#CF4794","#8AA919","#D95F02","#1B9E77","#73935E","#E7298A","#B6599E","#BD752B","#C9633F","#E7298A","#1B9E77","#D95F02","#C9633F","#9D8545","#73935E","#BD752B","#9D8545","#9966A9","#9D8545","#D95F02","#1B9E77","#73935E","#1B9E77","#9C6C8D","#B66866","#7570B3","#1B9E77","#1B9E77","#7570B3","#8AA919","#B6599E","#B66866","#7570B3","#CF4794","#CE5F74","#9C6C8D","#929443"],"weight":[3.96,2.76,1.96,4.3998,2.52,4.1,6.032,3.05,2.678,4.14,6.3,2.54,3.75,2.63,6.33,3.7,2.42,3.22,3.78,12.5,2.66,2.88,4,2.6,0.786,2.398,3.79,2.81,1.94,2.86,6.3,2.16,2.54,2.94,2.82,1.44,3.658,6.5,4.218,2.84,2.6,2.87,1.6475,4.24218,4.7,3.1,4.58,4.178,1.00276,3.5933,6.7,2.94,5.486,3.44,2.88304,3.94,3.14,4.08,4.15,3.55,2.7381,1.65,3.1,2.498,3.31,2.5,3.06,2.998,2.48,2.22,4.26,5.24,1.17,5.44,3.14,2.16,4.1,2.04,2.1,3.84,6.96,2.65,6.20026,2.72,2.9,1.878,3.086,2.94,2.24,2.64,4.63426,2.17,2.2,4.79372,1.9,2.58,3.4838,3.07,8.05722,3.51,2.52,2.2,2.96,3.16,7.46,6.12,2.7,2.2,4.56,2.38,4.8,3.3735,5.08,2.488,2.44,2.05552,4.314,3.68,2.3,8.02358,3.36,3.75,2.32,2.52,3.38,5.56,2.6,3.698,6.1606,3.45,3.46,3.48,2.24,3.21,3.7,4.18,6.14,5.90986,2.1,3.92,4.77,4.0298,3.14,2.58,2.04,2.96,15.1,3.08,6,2.57,2.4,2.6,4.47,2.52,2.138,5.5,3.5748,3.497,1.62,1.74,3.13,6.3,3.38,5.39,3.15,5,3.718,3.97,2.53,3.06,8.7756,2.12,4.98,2.79,2.1,4.685,3.23,2.66,2.4,2.98,2.9,1.66,2.24,3.44,4,2.36,2.63,2.8,3.66,1.775,4.002,2.86,2.92,3.6,3.4,2.84,2.86,2.86,3.62,2.48,2.78,5.2,3.34,2.97,1.64,2.345,4.4,2.65,3.67,4.5,2.5,4.22,6.598,2.57,2.26,1.6,1.52,2,4.06,3.4,4.126,1.92,4.37378,3.958,3.78,2.96,5.7,3.12,3.4,5.4,3.70176,2.908,2.68,3.48,3.7,2.48,3.16,8.198,1.8,4.08,2.37,2.738,4.24,3.28,2.395,3.518,2.76,3.18,1.99,2.62,5.8,5,1.65,2.55,2.98,2.82,7.69,1.877,5.14,3.1,2.9,3.64,2.198,3.75374,2.6,2.74,5.2,6.2018,4.15,2.48,5.594,4.08,3.37,5.095,3.498,2.55,6.90948,7.41756,2.94,2.46,4.33674,4.29,2.77,3.2,7.5,2.8,2.3,3.18,1.708,3.13,5.20522,2.14,3.06,3.01,2.605,3.74,4.08,1.36,4.7,3.312,2.072,2.38,2.36,3.158,2.88,2.726,3.58,2.93,2.6,4.1,2.88,2.66,1.59,2.498,2.74,2.57,3.64,3.1,2.9422,1.82,2.398,4.57,6.04,12.3,4.6646,7.62,7.54852,4.58,5.5,3.2,2.14,3.4,2.58,2.92,1.84,4.5575,2.72,3.734,3.42,2.321,6.9,3.76,3.68,4.28,3.346,2.1,8.2,4.15,3.2,3.63,2.86,3.204,2.11,5.2,1.86,7.2,3.238,4.43,2.78,8.3,2.338,6.6,4.2698,2.38,6.4,2.51,4.9,6.3,2.6,2.55,3.94,5.8,7.25,3.4,3.47,11.65866,7.6,2.57,4.888,2.8,3.75,4.258,5.098,2.76,1.9,4.5,2.44,3.03,1.74,6.1,5.54,1.57,2.8,3.6,2.58,2.78,3.258,2.55,4.5,3,1.33,3.12,2.95,3.37,2.17076,2.26,6.85286,3.2,4.63,3.998,2.98,4.9,3.61,3.1,4.19,2.4,5,1.9,4.7,2.7,4.73,3.1,2.96,2.3,3.36,3.54,5.55,2.44,2.6,3.178,3.6,3.68,1.6,11.04,1,2.65,2.55,3.43,3.92,1.76,1.29,3.06,4.79,7.84,2.578,2.99,2.8,2.55,3.7,5.14,3.82,2.94,2.7,4.64,2.24,2.77,3.78,3.298,2.56,3.458,2.65,2.6,1.61,3.478,2.64,3.61,2.635,3.6,1.24766,2.48,1.88,2.74,3,3.4,2.84,5,2.148,2.97,5.996,2.46,3.04,3.86,2.842,3.59562,3.072,2.25,3.75,2.4,3.598,6.4,1.4,2.82,14.9,4,4.534,1.79,2.64,1.18,4.42,4.6,4.02,2.59,3.52,6.8,1.79,2.56,6.398,10.03674,3.2,4.498,6.4,2.798,2.46,4.346,4.6,3.92,2.26,2.3,7.5,1.92,2.98,6.36122,2.678,3.18,3.56,3.66,2.7,2.512,2.61,2.7,2.14,2.75,2.5,1.44,3.8,3.74,4.26,3.8,0.698,3.18,4.84,4.8,7.1,2.54,3.5,5.5,3,7.5,2.78,2.32,2.6,1.2,2.896,4.63,3,4.82,4.4,2.1,1.938,2.62,1.5855,2.93,2.32,1.76,2.74,4.166,2.36,4.28,2.83,2.93,2.44,6.48,4.92,2.69,6.4,7.7,2.49,2.73,3.93,2.44,2.37716,0.9,4.6,2.42,3.2,2.3,3.16,3.24,4.87,3.04,2.696,3.07,2,2.76,4.5,4.25,1.58,2.54,1.91082,6.42],"opacity":1,"fill":true,"fillColor":["#E7298A","#B6831A","#BD752B","#D69D0F","#CE5F74","#CF4794","#1B9E77","#1B9E77","#73935E","#73935E","#929443","#9C6C8D","#B27D5D","#9D8545","#B27D5D","#B66866","#CF4794","#9D8545","#8AA919","#929443","#1B9E77","#1B9E77","#7570B3","#66A61E","#CF4794","#9D8545","#B66866","#1B9E77","#E6AB02","#B6599E","#929443","#CF4794","#8AA919","#9C6C8D","#B66866","#CE5F74","#7570B3","#C9633F","#73935E","#1B9E77","#73935E","#73935E","#CE5F74","#D95F02","#7570B3","#1B9E77","#9966A9","#D95F02","#CE5F74","#B66866","#C9633F","#D95F02","#73935E","#1B9E77","#D95F02","#D95F02","#9C6C8D","#B66866","#73935E","#D95F02","#7570B3","#CF4794","#9D8545","#CE5F74","#1B9E77","#9966A9","#1B9E77","#D95F02","#1B9E77","#E6AB02","#73935E","#929443","#9D8545","#73935E","#1B9E77","#BD752B","#E7298A","#8AA919","#1B9E77","#B66866","#929443","#1B9E77","#D95F02","#1B9E77","#B66866","#C9AB0C","#1B9E77","#9966A9","#8AA919","#1B9E77","#B27D5D","#8AA919","#CF4794","#B6599E","#9D8545","#1B9E77","#B66866","#73935E","#C9633F","#7570B3","#1B9E77","#CF4794","#9C6C8D","#9C6C8D","#C69016","#7570B3","#BD752B","#9D8545","#B27D5D","#1B9E77","#73935E","#73935E","#C9633F","#1B9E77","#BD752B","#CE5F74","#73935E","#1B9E77","#BD752B","#66A61E","#8AA919","#B66866","#9D8545","#CE5F74","#B66866","#66A61E","#CF4794","#9D8545","#BD752B","#9C6C8D","#C9633F","#7570B3","#9C6C8D","#9C6C8D","#D95F02","#9966A9","#D95F02","#73935E","#1B9E77","#D95F02","#D95F02","#B66866","#8AA919","#9D8545","#1B9E77","#73935E","#929443","#9C6C8D","#929443","#9D8545","#1B9E77","#9D8545","#CF4794","#1B9E77","#CF4794","#9966A9","#D69D0F","#1B9E77","#C9AB0C","#9D8545","#1B9E77","#B27D5D","#9C6C8D","#C9633F","#9C6C8D","#73935E","#B66866","#73935E","#B6599E","#1B9E77","#66A61E","#E6AB02","#7570B3","#73935E","#BD752B","#C9633F","#B66866","#CF4794","#1B9E77","#CE5F74","#1B9E77","#BD752B","#BD752B","#7570B3","#1B9E77","#8AA919","#9C6C8D","#9D8545","#7570B3","#9C6C8D","#E7298A","#9966A9","#1B9E77","#66A61E","#B66866","#9966A9","#AAAA14","#1B9E77","#B66866","#9C6C8D","#1B9E77","#AAAA14","#73935E","#E7298A","#BD752B","#BD752B","#9966A9","#CF4794","#B66866","#AAAA14","#9D8545","#73935E","#C9633F","#73935E","#9D8545","#C9AB0C","#9966A9","#1B9E77","#B66866","#66A61E","#B6599E","#BD752B","#B27D5D","#7570B3","#9966A9","#9C6C8D","#C9633F","#D95F02","#9966A9","#B66866","#B66866","#CE5F74","#CF4794","#B27D5D","#7570B3","#CF4794","#E7298A","#C9633F","#1B9E77","#D95F02","#BD752B","#BD752B","#66A61E","#E7298A","#E7298A","#9966A9","#1B9E77","#1B9E77","#CE5F74","#8AA919","#C9633F","#C9633F","#7570B3","#BD752B","#CF4794","#1B9E77","#929443","#CE5F74","#D95F02","#9D8545","#9C6C8D","#BD752B","#BD752B","#D69D0F","#9D8545","#E7298A","#66A61E","#C9633F","#D95F02","#1B9E77","#C69016","#B27D5D","#7570B3","#73935E","#1B9E77","#B6831A","#C9633F","#D95F02","#1B9E77","#1B9E77","#73935E","#CF4794","#1B9E77","#D69D0F","#66A61E","#E7298A","#CF4794","#9966A9","#E6AB02","#9D8545","#D95F02","#BD752B","#1B9E77","#73935E","#73935E","#73935E","#73935E","#1B9E77","#BD752B","#B66866","#BD752B","#1B9E77","#BD752B","#B6599E","#1B9E77","#1B9E77","#B66866","#E7298A","#1B9E77","#73935E","#9966A9","#B66866","#CF4794","#73935E","#1B9E77","#CF4794","#D95F02","#9C6C8D","#D95F02","#8AA919","#BD752B","#9966A9","#AAAA14","#C9633F","#73935E","#E7298A","#66A61E","#BD752B","#73935E","#B6599E","#BD752B","#B27D5D","#1B9E77","#73935E","#C9AB0C","#D95F02","#B6599E","#B27D5D","#7570B3","#1B9E77","#1B9E77","#B66866","#CF4794","#B66866","#1B9E77","#CF4794","#929443","#C9633F","#9966A9","#C69016","#B6599E","#D69D0F","#E6AB02","#D95F02","#CF4794","#C9633F","#8AA919","#73935E","#9C6C8D","#BD752B","#1B9E77","#896E46","#D69D0F","#9D8545","#BD752B","#E6AB02","#AAAA14","#E7298A","#BD752B","#1B9E77","#7570B3","#929443","#929443","#B6599E","#73935E","#C9633F","#C9633F","#1B9E77","#AAAA14","#B6599E","#66A61E","#73935E","#D95F02","#B6599E","#8AA919","#73935E","#BD752B","#1B9E77","#9D8545","#D95F02","#9966A9","#9D8545","#9C6C8D","#9C6C8D","#1B9E77","#CE5F74","#CF4794","#1B9E77","#D95F02","#9C6C8D","#9D8545","#1B9E77","#E7298A","#1B9E77","#1B9E77","#CF4794","#C9633F","#1B9E77","#73935E","#D95F02","#1B9E77","#B6599E","#1B9E77","#8AA919","#CF4794","#9D8545","#D95F02","#9D8545","#7570B3","#1B9E77","#E7298A","#BD752B","#9D8545","#9D8545","#B66866","#B66866","#C9633F","#9D8545","#B6599E","#9C6C8D","#D69D0F","#7570B3","#BD752B","#C9633F","#CE5F74","#73935E","#CF4794","#B6599E","#B6599E","#E6AB02","#CE5F74","#1B9E77","#66A61E","#B27D5D","#9D8545","#1B9E77","#1B9E77","#CE5F74","#B66866","#B27D5D","#D69D0F","#B6599E","#9C6C8D","#D95F02","#9C6C8D","#9966A9","#9966A9","#CF4794","#9966A9","#D95F02","#1B9E77","#9D8545","#CF4794","#73935E","#B6599E","#B27D5D","#CF4794","#B66866","#9C6C8D","#C9AB0C","#1B9E77","#9D8545","#1B9E77","#9D8545","#1B9E77","#C9633F","#9D8545","#B6831A","#7570B3","#9D8545","#9D8545","#73935E","#1B9E77","#B27D5D","#9C6C8D","#9D8545","#B66866","#1B9E77","#9966A9","#C9633F","#CE5F74","#BD752B","#929443","#73935E","#D95F02","#9C6C8D","#1B9E77","#9D8545","#73935E","#7570B3","#73935E","#9C6C8D","#B66866","#929443","#9D8545","#BD752B","#66A61E","#66A61E","#E7298A","#73935E","#9966A9","#CF4794","#B6831A","#C9633F","#AAAA14","#73935E","#CF4794","#9C6C8D","#E7298A","#E6AB02","#E7298A","#C9633F","#9D8545","#1B9E77","#D95F02","#1B9E77","#9D8545","#BD752B","#BD752B","#1B9E77","#CE5F74","#9C6C8D","#9D8545","#CE5F74","#B66866","#9966A9","#73935E","#9C6C8D","#CE5F74","#1B9E77","#1B9E77","#7570B3","#66A61E","#BD752B","#B66866","#73935E","#9D8545","#E7298A","#E7298A","#E6AB02","#BD752B","#BD752B","#E7298A","#73935E","#9C6C8D","#D95F02","#B27D5D","#1B9E77","#9D8545","#B6599E","#BD752B","#7570B3","#1B9E77","#CF4794","#8AA919","#D95F02","#1B9E77","#73935E","#E7298A","#B6599E","#BD752B","#C9633F","#E7298A","#1B9E77","#D95F02","#C9633F","#9D8545","#73935E","#BD752B","#9D8545","#9966A9","#9D8545","#D95F02","#1B9E77","#73935E","#1B9E77","#9C6C8D","#B66866","#7570B3","#1B9E77","#1B9E77","#7570B3","#8AA919","#B6599E","#B66866","#7570B3","#CF4794","#CE5F74","#9C6C8D","#929443"],"fillOpacity":0.2},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null,null]}],"limits":{"lat":[41.986509,42.063381],"lng":[-93.692286,-93.599866]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="splitting-the-data" class="section level2">
<h2>Splitting the data</h2>
<p>Now that we have a better feel for the data, let’s use the <code>rsample</code> package to split the data into training and test sets. For more robust predictions, we may also want to use <code>vfold_cv()</code> to resample the training set later on.</p>
<pre class="r"><code>library(rsample)

set.seed(518)
ames_split &lt;- initial_split(ames_df, prop = 0.8, strata = &quot;sale_price&quot;) 

ames_train &lt;- training(ames_split)
ames_test &lt;- testing(ames_split)</code></pre>
</div>
<div id="data-preprocessing" class="section level2">
<h2>Data preprocessing</h2>
<p>Feature engineering with the <code>recipes</code> package provides an expansive series of data manipulation steps that can be woven together to elegantly preprocess our data before machine learning.</p>
<pre class="r"><code>library(recipes) 

ames_rec &lt;- 
  recipe(sale_price ~ ., data = ames_train) %&gt;% # Specify the model--in our case, we are using all variables (.) to predict sale price.
  step_log(sale_price, base = 10) %&gt;% # take the log of sale price
  step_other(neighborhood, threshold = 0.01) %&gt;% 
  step_normalize(all_numeric()) %&gt;% 
  step_dummy(all_nominal())</code></pre>
</div>
<div id="model-specification" class="section level2">
<h2>Model specification</h2>
<pre class="r"><code>ames_lm &lt;- linear_reg() %&gt;% 
  set_engine(&quot;lm&quot;) %&gt;% 
  set_mode(&quot;regression&quot;)</code></pre>
</div>
<div id="creating-a-workflow-fitting-the-model-and-making-predictions-on-the-testset" class="section level2">
<h2>Creating a workflow, fitting the model and making predictions on the testset</h2>
<pre class="r"><code>library(workflows) #loaded with tidymodels
lm_wkfl &lt;- 
  workflow() %&gt;% 
  add_model(ames_lm) %&gt;% 
  add_recipe(ames_rec)

ames_wkfl_fit &lt;- lm_wkfl %&gt;%
  last_fit(split = ames_split)

ames_wkfl_fit %&gt;%
  collect_metrics()</code></pre>
<pre><code>## # A tibble: 2 x 4
##   .metric .estimator .estimate .config             
##   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
## 1 rmse    standard       0.532 Preprocessor1_Model1
## 2 rsq     standard       0.729 Preprocessor1_Model1</code></pre>
<pre class="r"><code>ames_wkfl_fit %&gt;%
  collect_predictions()</code></pre>
<pre><code>## # A tibble: 588 x 5
##    id                .pred  .row sale_price .config             
##    &lt;chr&gt;             &lt;dbl&gt; &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;               
##  1 train/test split  0.441     1      0.621 Preprocessor1_Model1
##  2 train/test split  1.06      4      0.929 Preprocessor1_Model1
##  3 train/test split  0.188     5      0.320 Preprocessor1_Model1
##  4 train/test split  0.417     8      0.340 Preprocessor1_Model1
##  5 train/test split  0.962     9      0.853 Preprocessor1_Model1
##  6 train/test split  0.638    15      0.587 Preprocessor1_Model1
##  7 train/test split  1.08     18      2.10  Preprocessor1_Model1
##  8 train/test split -1.04     19     -0.403 Preprocessor1_Model1
##  9 train/test split -0.105    25     -0.255 Preprocessor1_Model1
## 10 train/test split -0.800    27     -0.677 Preprocessor1_Model1
## # … with 578 more rows</code></pre>
</div>
<div id="visualizing-r-squared" class="section level2">
<h2>Visualizing R-squared</h2>
<pre class="r"><code>ames_wkfl_fit %&gt;%
  collect_predictions() %&gt;% 
  mutate(sale_price = 10^sale_price,
         .pred = 10^.pred) %&gt;% 
  ggplot(aes(x = sale_price, y = .pred)) +
  geom_point() +
  geom_abline(color = &#39;blue&#39;, linetype = 2) +
  coord_obs_pred() +
  labs(title = &#39;R-Squared Plot&#39;,
       y = &#39;Predicted Sale Price&#39;,
       x = &#39;Actual Sale Price&#39;)</code></pre>
<p><img src="https://www.gabemednick.com/post/ameshousing/index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>ames_wkfl_fit %&gt;%
  collect_predictions() %&gt;% 
  ggplot(aes(x = sale_price, y = .pred)) +
  geom_point() +
  geom_abline(color = &#39;blue&#39;, linetype = 2) +
  coord_obs_pred() +
  labs(title = &#39;R-Squared Plot&#39;,
       y = &#39;Predicted Sale Price (log)&#39;,
       x = &#39;Actual Sale Price (log)&#39;)</code></pre>
<p><img src="https://www.gabemednick.com/post/ameshousing/index_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
</div>

    </div>

    



















  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/gabriel-mednick-phd/avatar_huf2ab3986b89079c6aa2e784d1978d71e_646423_270x270_fill_q90_lanczos_center.jpg" alt="Gabriel Mednick, PhD">
      

      <div class="media-body">
        <h5 class="card-title"><a href="https://www.gabemednick.com/">Gabriel Mednick, PhD</a></h5>
        
        <p class="card-text">Data scientist, biochemist, computational biologist, educator, life enthusiast</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="far fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/GabeMednick" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/gmednick" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/gabe-mednick/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin-in"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="/" >
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  














  
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.72756512af279b10e3e4b09540ed6e9f.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    © Gabe Mednick 2022
  </p>

  
  






  <p class="powered-by">
    
    This site was made with <a href="https://cran.r-project.org/" target="_blank" rel="noopener"><i class="fab fa-r-project"  style="color: #FF69B4"></i></a>, the<a href="https://github.com/rstudio/blogdown" target="_blank" rel="noopener"> Blogdown</a> package and the 
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>. Site deployed on <a href="https://www.netlify.com/" target="_blank" rel="noopener">Netlify </a> with a little help from <a href="https://github.com/gmednick" target="_blank" rel="noopener"><i class="fab fa-github"  style="color: #FF69B4"></i></a>. Thank you Alison Hill <i class="fas fa-praying-hands" style="color: #FF69B4"></i> and others for sharing tutorials on how to get blogging with <i class="fab fa-r-project"  style="color: #FF69B4"></i>! Stunning photo of the Milky Way taken by Kristopher Roller.


    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
